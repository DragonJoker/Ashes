struct PixelInput
{
	float3 position : POSITION;
};

Texture2D mapColour : register( t1 );
SamplerState samColour : register( s1 );

float2 sampleSphericalMap( float3 v )
{
	float2 uv = float2( atan2( v.z, v.x ), asin( v.y ) );
	uv *= float2( 0.1591, 0.3183 );
	uv += 0.5;
	return uv;
}

float4 mainPx( in PixelInput input ) : SV_TARGET
{
	float2 uv = sampleSphericalMap( normalize( input.position ) );
	return float4( mapColour.Sample( samColour, uv ).rgb, 1.0 );
}
