cbuffer Roll : register(b0)
{
	int2 textureSize;
	float roll;
};

RWTexture2D<float4> mapDest : register( u1 );

[numthreads( 16, 16, 1 )]
void mainCs( uint3 DTid : SV_DispatchThreadID
		   , uint3 GTid : SV_GroupThreadID
		   , uint3 Gid : SV_GroupID )
{
	int2 storePos = int2( DTid.xy );
	float localCoef = length( float2( int2( GTid.xy ) - 8 ) / 8.0 );
	float globalCoef = sin( float( Gid.x + Gid.y ) * 0.1 + roll ) * 0.5;
	float4 value = mapDest[storePos];
	mapDest[storePos] = value - float4( ( globalCoef * localCoef ).xxx, 1.0 );
}
