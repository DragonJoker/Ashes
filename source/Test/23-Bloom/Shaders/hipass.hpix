Texture2D colorMap : register(t0);
SamplerState colorSampler : register(s0);

struct PixelInput
{
	float2 inUV : TEXCOORD;
};

float4 mainPx( in PixelInput input ) : SV_TARGET
{
	float4 result = float4( colorMap.SampleLevel( colorSampler, float2( input.inUV.x, 1.0 - input.inUV.y ), 0.0 ).xyz, 1.0 );
	float maxComponent = max( result.r, result.g );
	maxComponent = max( maxComponent, result.b );

	if ( maxComponent > 0.7 )
	{
		result.xyz /= maxComponent;
	}
	else
	{
		result.xyz = 0.0.xxx;
	}

	return result;
}
