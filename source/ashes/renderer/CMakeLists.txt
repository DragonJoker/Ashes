if ( NOT DEFINED ASHES_BUILD_RENDERER_PLUGINS )
	option( ASHES_BUILD_RENDERER_PLUGINS "Build renderer plugins" ON )
endif ()

if ( ASHES_BUILD_RENDERER_PLUGINS )
	set( TARGET_INCLUDE_DIRS
		${TARGET_INCLUDE_DIRS}
		${ASHES_SOURCE_DIR}/include
		${ASHES_CONFIG_DIR}/include
	)
	set( ASHES_BUILD_PLUGINS TRUE )

	if ( NOT DEFINED ASHES_BUILD_RENDERER_VKN )
		option( ASHES_BUILD_RENDERER_VKN "Build Vulkan renderer plugin" ON )
	endif ()
	if ( ASHES_BUILD_RENDERER_VKN )
		set( ASHES_BUILD_VKN ON  )
	else ()
		set( ASHES_BUILD_VKN OFF )
	endif ()

	if ( NOT APPLE )
		if ( NOT DEFINED ASHES_BUILD_RENDERER_OGL3 )
			option( ASHES_BUILD_RENDERER_OGL3 "Build OpenGL 3.X renderer plugin" ON )
		endif ()
		if ( ASHES_BUILD_RENDERER_OGL3 )
			set( ASHES_BUILD_OGL3 ON  )
		else ()
			set( ASHES_BUILD_OGL3 OFF )
		endif ()

		if ( NOT DEFINED ASHES_BUILD_RENDERER_OGL4 )
			option( ASHES_BUILD_RENDERER_OGL4 "Build OpenGL 4.X renderer plugin" ON )
		endif ()
		if ( ASHES_BUILD_RENDERER_OGL4 )
			set( ASHES_BUILD_OGL4 ON  )
		else ()
			set( ASHES_BUILD_OGL4 OFF )
		endif ()
	else ()
		set( ASHES_BUILD_OGL3 OFF )
		set( ASHES_BUILD_OGL4 OFF )
	endif ()

	if ( WIN32 )
		if ( NOT DEFINED ASHES_BUILD_RENDERER_D3D11 )
			option( ASHES_BUILD_RENDERER_D3D11 "Build Direct3D 11 renderer plugin" ON )
		endif ()
		if ( ASHES_BUILD_RENDERER_D3D11 )
			set( ASHES_BUILD_D3D11 ON  )
		else ()
			set( ASHES_BUILD_D3D11 OFF )
		endif ()
	else ()
		set( ASHES_BUILD_D3D11 OFF )
	endif ()

	if ( NOT DEFINED ASHES_BUILD_RENDERER_TEST )
		option( ASHES_BUILD_RENDERER_TEST "Build Test renderer plugin" OFF )
	endif ()
	if ( ASHES_BUILD_RENDERER_TEST )
		set( ASHES_BUILD_TEST ON  )
	else ()
		set( ASHES_BUILD_TEST OFF )
	endif ()
else ()
	set( ASHES_BUILD_PLUGINS OFF )
endif ()

if ( ASHES_BUILD_PLUGINS )
	set( RendererDependencies
		ashes::common
		ashes::ashes
		ashes::RendererCommon
	)
	add_subdirectory( RendererCommon )

	if ( ASHES_BUILD_OGL3 OR ASHES_BUILD_OGL4 )
		if ( ANDROID )
			add_definitions( -DASHES_ANDROID )
		elseif ( NOT WIN32 )
			add_definitions( -DASHES_LINUX )
			add_definitions( -DASHES_VENDOR_GL )
			option( ASHES_USE_XLIB_EGL "Use EGL with XLIB" OFF )
		endif ()
		add_subdirectory( GlRendererCommon )
	endif ()
	if ( ASHES_BUILD_OGL3 )
		add_subdirectory( Gl3Renderer )
	endif ()
	if ( ASHES_BUILD_OGL4 )
		add_subdirectory( Gl4Renderer )
	endif ()
	if ( ASHES_BUILD_VKN )
		add_subdirectory( VkRenderer )
	endif ()
	if ( ASHES_BUILD_D3D11 )
		add_subdirectory( D3D11Renderer )
	endif ()
	if ( ASHES_BUILD_TEST )
		add_subdirectory( TestRenderer )
	endif ()
	set( ENABLED_RENDERERS ${ENABLED_RENDERERS} PARENT_SCOPE )
endif ()
